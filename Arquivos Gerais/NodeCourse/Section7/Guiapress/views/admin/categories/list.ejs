<%- include('../../partials/header.ejs') %>
<%- include('../../partials/navbar.ejs') %>

<div class="container">
    <hr />
    <h2>Lista de Categorias</h2>
    <hr />
    <a class="btn btn-success" href="/admin/categories/new">Cadastrar</a>
    <table class="table table-bordered">
          <thead>
            <tr>
                <th>Id</th>
                <th>Title</th>
                <th>Slug</th>
                <th>Action</th>
            </tr>
          </thead>
        <tbody>
          <% categories.forEach(category => { %>
            <tr>
              <th><%= category.id %></th>
              <th><%= category.title %></th>
              <th><%=  category.slug %></th>
              <th>
                  <a href="/admin/categories/edit/<%= category.id %>" class="btn btn-warning">Editar</a>

                  <form method="POST" , 
                        action="/admin/categories/delete" 
                        style=" display: inline" 
                        onsubmit="confirmarDelecao(event, this)">
                    <input type="hidden" name="id" value = "<%= category.id %>" >
                    <button class="btn btn-danger">Deletar</button>
                  </form>                

              </th>
          </tr>
           <% }) %>
         
        </tbody>
         
           
    </table>

</div>

<%- include('../../partials/footer.ejs') %>
<script>
   function confirmarDelecao(event, form){
     event.preventDefault();
     console.log("Formulário não enviado");
     var decicion = confirm("Confirma deleção?");
       if(decicion){
         form.submit();
        
        }
    }
</script>